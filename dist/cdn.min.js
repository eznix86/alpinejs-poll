(()=>{function a(v){function h(o){let e=o.find(i=>/^[0-9]+(ms|s|m|h)$/.test(i));if(!e)return 6e4;let n=parseInt(e),t=e.replace(/[0-9]/g,"");return{ms:n,s:n*1e3,m:n*6e4,h:n*36e5}[t]}function p(o){let e=s=>o(s),n=()=>e(!document.hidden),t=()=>e(!0),i=()=>e(!1),l=s=>{s.persisted,e(!0)},r=()=>e(!1);return document.addEventListener("visibilitychange",n),window.addEventListener("focus",t),window.addEventListener("blur",i),window.addEventListener("pageshow",l),window.addEventListener("pagehide",r),e(!document.hidden),()=>{document.removeEventListener("visibilitychange",n),window.removeEventListener("focus",t),window.removeEventListener("blur",i),window.removeEventListener("pageshow",l),window.removeEventListener("pagehide",r)}}v.directive("poll",(o,{modifiers:e,expression:n},{evaluateLater:t})=>{let i=t(n),l=h(e),r=e.includes("visible")||e.includes("focus"),s=null,w=!0;function f(){i(u=>u())}function m(u=!1){c(),u&&f(),s=setInterval(f,l)}function c(){s&&clearInterval(s),s=null}let d=null;r?d=p(u=>{w=u,w?m(!0):c()}):m(!0),o._x_cleanup(()=>{c(),d&&d()})}),v.directive("visible",(o,{expression:e},{evaluateLater:n})=>{let t=n(e),i=p(l=>{t(r=>r(l))});o._x_cleanup(()=>{i()})})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(a));})();
