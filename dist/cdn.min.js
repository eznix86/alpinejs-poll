(()=>{function v(w){function h(u){let n=u.find(i=>/^[0-9]+(ms|s|m|h)$/.test(i));if(!n)return 6e4;let e=parseInt(n),t=n.replace(/[0-9]/g,"");return{ms:e,s:e*1e3,m:e*6e4,h:e*36e5}[t]}function f(u){let n,e=r=>{n!==r&&(n=r,u(r))},t=()=>e(!document.hidden),i=()=>e(!0),s=()=>e(!1),l=()=>e(!0),o=()=>e(!1);return document.addEventListener("visibilitychange",t),window.addEventListener("focus",i),window.addEventListener("blur",s),window.addEventListener("pageshow",l),window.addEventListener("pagehide",o),e(!document.hidden),()=>{document.removeEventListener("visibilitychange",t),window.removeEventListener("focus",i),window.removeEventListener("blur",s),window.removeEventListener("pageshow",l),window.removeEventListener("pagehide",o)}}w.directive("poll",(u,{modifiers:n,expression:e},{evaluate:t,cleanup:i})=>{let s=h(n),l=n.includes("visible"),o=null,r=!0;function p(){t(e)}function m(a=!1){d(),a&&p(),o=setInterval(p,s)}function d(){o&&clearInterval(o),o=null}let c=null;l?c=f(a=>{r=a,r?m(!0):d()}):m(!0),i(()=>{d(),c&&c()})}),w.directive("visible",(u,{expression:n},{evaluateLater:e,cleanup:t})=>{let i=e(n),s=f(l=>{i(()=>{},{scope:{$visible:l}})});t(s)})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(v));})();
