(()=>{function a(v){function h(l){let e=l.find(i=>/^[0-9]+(ms|s|m|h)$/.test(i));if(!e)return 6e4;let n=parseInt(e),t=e.replace(/[0-9]/g,"");return{ms:n,s:n*1e3,m:n*6e4,h:n*36e5}[t]}function w(l){let e=o=>l(o),n=()=>e(!document.hidden),t=()=>e(!0),i=()=>e(!1),s=()=>e(!0),r=()=>e(!1);return document.addEventListener("visibilitychange",n),window.addEventListener("focus",t),window.addEventListener("blur",i),window.addEventListener("pageshow",s),window.addEventListener("pagehide",r),e(!document.hidden),()=>{document.removeEventListener("visibilitychange",n),window.removeEventListener("focus",t),window.removeEventListener("blur",i),window.removeEventListener("pageshow",s),window.removeEventListener("pagehide",r)}}v.directive("poll",(l,{modifiers:e,expression:n},{evaluate:t,cleanup:i})=>{let s=h(e),r=e.includes("visible")||e.includes("focus"),o=null,f=!0;function p(){t(n)}function m(c=!1){u(),c&&p(),o=setInterval(p,s)}function u(){o&&clearInterval(o),o=null}let d=null;r?d=w(c=>{f=c,f?m(!0):u()}):m(!0),i(()=>{u(),d&&d()})}),v.directive("visible",(l,{expression:e},{evaluate:n,cleanup:t})=>{let i=w(s=>{n(`(${e})(${s})`)});t(()=>{i()})})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(a));})();
